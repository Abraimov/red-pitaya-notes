# Create xlslice
cell xilinx.com:ip:xlslice:1.0 slice_0 {
  DIN_WIDTH 8 DIN_FROM 0 DIN_TO 0 DOUT_WIDTH 1
}

# Create xlconstant
cell xilinx.com:ip:xlconstant:1.1 const_0

# Create axis_clock_converter
cell xilinx.com:ip:axis_clock_converter:1.1 fifo_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 4
} {
  m_axis_tready const_0/dout
  m_axis_aclk /ps_0/FCLK_CLK0
  m_axis_aresetn /rst_0/peripheral_aresetn
}

# Create xlconcat
cell xilinx.com:ip:xlconcat:2.1 concat_0 {
  NUM_PORTS 8
}

set prop_list {}
for {set i 0} {$i <= 7} {incr i} {
  lappend prop_list IN${i}_WIDTH 32
}
set_property -dict $prop_list [get_bd_cells concat_0]

for {set i 0} {$i <= 7} {incr i} {
  connect_bd_net [get_bd_pins concat_0/In$i] [get_bd_pins fifo_0/m_axis_tdata]
}

# Create xlconcat
cell xilinx.com:ip:xlconcat:2.1 concat_1 {
  NUM_PORTS 16
}

set prop_list {}
for {set i 0} {$i <= 15} {incr i} {
  lappend prop_list IN${i}_WIDTH 1
}
set_property -dict $prop_list [get_bd_cells concat_1]

for {set i 0} {$i <= 15} {incr i} {
  connect_bd_net [get_bd_pins concat_1/In$i] [get_bd_pins fifo_0/m_axis_tvalid]
}

# Create axis_switch
cell xilinx.com:ip:axis_switch:1.1 switch_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 2
  ROUTING_MODE 1
  NUM_SI 16
  NUM_MI 8
} {
  s_axis_tdata concat_0/dout
  s_axis_tvalid concat_1/dout
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

set prop_list {}
for {set i 0} {$i <= 7} {incr i} {
  for {set j 0} {$j <= 15} {incr j} {
    if {$i == $j / 2} continue
    lappend prop_list CONFIG.M[format %02d $i]_S[format %02d $j]_CONNECTIVITY 0
  }
}
set_property -dict $prop_list [get_bd_cells switch_0]

unset prop_list

for {set i 0} {$i <= 7} {incr i} {

  # Create xlslice
  cell xilinx.com:ip:xlslice:1.0 slice_[expr $i + 1] {
    DIN_WIDTH 256 DIN_FROM [expr 32 * $i + 31] DIN_TO [expr 32 * $i] DOUT_WIDTH 32
  }

  # Create axis_constant
  cell pavel-demin:user:axis_constant:1.0 phase_$i {
    AXIS_TDATA_WIDTH 32
  } {
    cfg_data slice_[expr $i + 1]/Dout
    aclk /ps_0/FCLK_CLK0
  }

  # Create dds_compiler
  cell xilinx.com:ip:dds_compiler:6.0 dds_$i {
    DDS_CLOCK_RATE 125
    SPURIOUS_FREE_DYNAMIC_RANGE 138
    FREQUENCY_RESOLUTION 0.2
    PHASE_INCREMENT Streaming
    HAS_TREADY true
    HAS_PHASE_OUT false
    PHASE_WIDTH 30
    OUTPUT_WIDTH 24
    DSP48_USE Minimal
    NEGATIVE_SINE true
  } {
    S_AXIS_PHASE phase_$i/M_AXIS
    aclk /ps_0/FCLK_CLK0
  }

  # Create axis_lfsr
  cell pavel-demin:user:axis_lfsr:1.0 lfsr_$i {} {
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

  # Create cmpy
  cell xilinx.com:ip:cmpy:6.0 mult_$i {
    FLOWCONTROL Blocking
    APORTWIDTH.VALUE_SRC USER
    BPORTWIDTH.VALUE_SRC USER
    APORTWIDTH 14
    BPORTWIDTH 24
    ROUNDMODE Random_Rounding
    OUTPUTWIDTH 25
  } {
    S_AXIS_A switch_0/M0${i}_AXIS
    S_AXIS_B dds_$i/M_AXIS_DATA
    S_AXIS_CTRL lfsr_$i/M_AXIS
    aclk /ps_0/FCLK_CLK0
  }

  # Create axis_broadcaster
  cell xilinx.com:ip:axis_broadcaster:1.1 bcast_[expr $i + 1] {
    S_TDATA_NUM_BYTES.VALUE_SRC USER
    M_TDATA_NUM_BYTES.VALUE_SRC USER
    S_TDATA_NUM_BYTES 8
    M_TDATA_NUM_BYTES 3
    M00_TDATA_REMAP {tdata[23:0]}
    M01_TDATA_REMAP {tdata[55:32]}
  } {
    S_AXIS mult_$i/M_AXIS_DOUT
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

}

for {set i 0} {$i <= 15} {incr i} {

  # Create cic_compiler
  cell xilinx.com:ip:cic_compiler:4.0 cic_$i {
    INPUT_DATA_WIDTH.VALUE_SRC USER
    FILTER_TYPE Decimation
    NUMBER_OF_STAGES 3
    SAMPLE_RATE_CHANGES Fixed
    FIXED_OR_INITIAL_RATE 250
    INPUT_SAMPLE_FREQUENCY 125
    CLOCK_FREQUENCY 125
    INPUT_DATA_WIDTH 24
    QUANTIZATION Truncation
    OUTPUT_DATA_WIDTH 24
    USE_XTREME_DSP_SLICE false
    HAS_DOUT_TREADY true
    HAS_ARESETN true
  } {
    S_AXIS_DATA bcast_[expr $i / 2 + 1]/M0[expr $i % 2]_AXIS
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

}

# Create axis_combiner
cell  xilinx.com:ip:axis_combiner:1.1 comb_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 3
  NUM_SI 16
} {
  S00_AXIS cic_0/M_AXIS_DATA
  S01_AXIS cic_1/M_AXIS_DATA
  S02_AXIS cic_2/M_AXIS_DATA
  S03_AXIS cic_3/M_AXIS_DATA
  S04_AXIS cic_4/M_AXIS_DATA
  S05_AXIS cic_5/M_AXIS_DATA
  S06_AXIS cic_6/M_AXIS_DATA
  S07_AXIS cic_7/M_AXIS_DATA
  S08_AXIS cic_8/M_AXIS_DATA
  S09_AXIS cic_9/M_AXIS_DATA
  S10_AXIS cic_10/M_AXIS_DATA
  S11_AXIS cic_11/M_AXIS_DATA
  S12_AXIS cic_12/M_AXIS_DATA
  S13_AXIS cic_13/M_AXIS_DATA
  S14_AXIS cic_14/M_AXIS_DATA
  S15_AXIS cic_15/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter:1.1 conv_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 48
  M_TDATA_NUM_BYTES 3
} {
  S_AXIS comb_0/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create cic_compiler
cell xilinx.com:ip:cic_compiler:4.0 cic_16 {
  INPUT_DATA_WIDTH.VALUE_SRC USER
  FILTER_TYPE Decimation
  NUMBER_OF_STAGES 6
  SAMPLE_RATE_CHANGES Fixed
  FIXED_OR_INITIAL_RATE 250
  INPUT_SAMPLE_FREQUENCY 0.5
  CLOCK_FREQUENCY 125
  NUMBER_OF_CHANNELS 16
  INPUT_DATA_WIDTH 24
  QUANTIZATION Truncation
  OUTPUT_DATA_WIDTH 32
  USE_XTREME_DSP_SLICE false
  HAS_DOUT_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA conv_0/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler:7.2 fir_0 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 32
  COEFFICIENTVECTOR {8.7407987750e-08, 3.8510441762e-08, -2.2447757309e-07, -6.0927830097e-07, -6.3652756749e-07, 6.0273329156e-07, 4.1829503959e-06, 1.0731734092e-05, 1.9650909882e-05, 2.8589659049e-05, 3.3687573508e-05, 3.0923743069e-05, 1.8406972920e-05, -1.2381003962e-06, -1.9775835132e-05, -2.4955060093e-05, -5.4102397011e-06, 4.2040977881e-05, 1.0538474989e-04, 1.5454115898e-04, 1.4619519782e-04, 3.7622937223e-05, -1.9310009846e-04, -5.2740893003e-04, -8.9671247795e-04, -1.1919154738e-03, -1.2957302898e-03, -1.1326057354e-03, -7.2109352710e-04, -2.0633638948e-04, 1.4991415965e-04, 3.5436518706e-05, -7.9379734229e-04, -2.3674478285e-03, -4.3705202030e-03, -6.0800928270e-03, -6.4118490031e-03, -4.0940852011e-03, 2.0498394205e-03, 1.2767732621e-02, 2.8077644226e-02, 4.7089379411e-02, 6.8017012377e-02, 8.8406721557e-02, 1.0554791117e-01, 1.1698309957e-01, 1.2099946435e-01, 1.1698309957e-01, 1.0554791117e-01, 8.8406721557e-02, 6.8017012377e-02, 4.7089379411e-02, 2.8077644226e-02, 1.2767732621e-02, 2.0498394205e-03, -4.0940852011e-03, -6.4118490031e-03, -6.0800928270e-03, -4.3705202030e-03, -2.3674478285e-03, -7.9379734229e-04, 3.5436518706e-05, 1.4991415965e-04, -2.0633638948e-04, -7.2109352710e-04, -1.1326057354e-03, -1.2957302898e-03, -1.1919154738e-03, -8.9671247795e-04, -5.2740893003e-04, -1.9310009846e-04, 3.7622937223e-05, 1.4619519782e-04, 1.5454115898e-04, 1.0538474989e-04, 4.2040977881e-05, -5.4102397011e-06, -2.4955060093e-05, -1.9775835132e-05, -1.2381003962e-06, 1.8406972920e-05, 3.0923743069e-05, 3.3687573508e-05, 2.8589659049e-05, 1.9650909882e-05, 1.0731734092e-05, 4.1829503959e-06, 6.0273329156e-07, -6.3652756749e-07, -6.0927830097e-07, -2.2447757309e-07, 3.8510441762e-08, 8.7407987750e-08}
  COEFFICIENT_WIDTH 32
  QUANTIZATION Maximize_Dynamic_Range
  BESTPRECISION true
  FILTER_TYPE Decimation
  RATE_CHANGE_TYPE Fixed_Fractional
  INTERPOLATION_RATE 3
  DECIMATION_RATE 4
  NUMBER_CHANNELS 16
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 0.002
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 33
  M_DATA_HAS_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA cic_16/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_subset_converter
cell xilinx.com:ip:axis_subset_converter:1.1 subset_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 5
  M_TDATA_NUM_BYTES 4
  TDATA_REMAP {tdata[31:0]}
} {
  S_AXIS fir_0/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler:7.2 fir_1 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 32
  COEFFICIENTVECTOR {1.6656637985e-08, 1.2893235690e-08, 9.9942072545e-10, -1.2331757880e-08, -1.8551918922e-08, -1.2943565403e-08, 1.4843245072e-09, 1.4975602262e-08, 1.7052716275e-08, 4.1991839397e-09, -1.6030649970e-08, -2.8215730030e-08, -1.8902002751e-08, 1.2496685302e-08, 4.9342354200e-08, 6.4783080557e-08, 3.8182533001e-08, -2.8001186874e-08, -1.0245084923e-07, -1.3732833013e-07, -9.5366500986e-08, 2.2252109387e-08, 1.6524196555e-07, 2.5217429069e-07, 2.1298160380e-07, 3.5472627343e-08, -2.1204631186e-07, -4.0167092125e-07, -4.0779339881e-07, -1.8206820874e-07, 2.0038363536e-07, 5.5709826662e-07, 6.8039372085e-07, 4.5118513646e-07, -7.5049274185e-08, -6.6501887371e-07, -1.0046538929e-06, -8.5982770186e-07, -2.2139126792e-07, 6.4982070103e-07, 1.3203530215e-06, 1.3933943573e-06, 7.3205001517e-07, -4.2455250825e-07, -1.5328607582e-06, -1.9932968185e-06, -1.4657369619e-06, -8.9827796277e-08, 1.5228713344e-06, 2.5518815370e-06, 2.3779765158e-06, 9.3883136803e-07, -1.1677550980e-06, -2.9195726205e-06, -3.3595530969e-06, -2.1080132207e-06, 3.7226332700e-07, 2.9263293069e-06, 4.2382281332e-06, 3.5024795758e-06, 8.9610366448e-07, -2.4172526965e-06, -4.7986461039e-06, -4.9409244578e-06, -2.5759054517e-06, 1.2969798607e-06, 4.8210299532e-06, 6.1707998031e-06, 4.4947423228e-06, 4.2620191709e-07, -4.1347681265e-06, -6.9081728035e-06, -6.3765802739e-06, -2.6095077007e-06, 2.6763887137e-06, 6.8987843184e-06, 7.8786427591e-06, 4.9698790122e-06, -5.3881767531e-07, -5.9922279112e-06, -8.6594236360e-06, -7.1151798428e-06, -2.0065151359e-06, 4.2112601063e-06, 8.4675724301e-06, 8.6142485847e-06, 4.5280747726e-06, -1.7972011101e-06, -7.2356034372e-06, -9.1006620686e-06, -6.5024435192e-06, -7.8966281872e-07, 5.1537467293e-06, 8.3923202907e-06, 7.4293507607e-06, 2.9285160434e-06, -2.6987159128e-06, -6.6012801642e-06, -6.9796815599e-06, -3.9610350079e-06, 5.9228238337e-07, 4.1980725604e-06, 5.1439418335e-06, 3.3629486845e-06, 3.1738427224e-07, -2.0037807805e-06, -2.3473223049e-06, -9.3978870859e-07, 7.4972093713e-07, 1.0841406175e-06, -5.1353646287e-07, -3.0000538420e-06, -4.2644692123e-06, -2.5447440301e-06, 2.1438124403e-06, 7.5442463806e-06, 1.0146129407e-05, 7.2465414510e-06, -1.0514981790e-06, -1.1197376941e-05, -1.7581351406e-05, -1.5491400992e-05, -4.1387912813e-06, 1.2050705154e-05, 2.4961636083e-05, 2.6738351232e-05, 1.4293178644e-05, -8.1140409905e-06, -3.0000720838e-05, -3.9439743718e-05, -2.9380106781e-05, -2.2338878649e-06, 3.0045213203e-05, 5.1060737096e-05, 4.8169951559e-05, 1.9740430396e-05, -2.2568032800e-05, -5.8336068734e-05, -6.8123248985e-05, -4.3826324013e-05, 5.7771518991e-06, 5.7766980126e-05, 8.5541827699e-05, 7.2299793370e-05, 2.0763496006e-05, -4.6316395594e-05, -9.6027969895e-05, -1.0135835099e-04, -5.5652404240e-05, 2.2181068302e-05, 9.5210154091e-05, 1.2593224830e-04, 9.5430079357e-05, 1.4488814602e-05, -7.9665915383e-05, -1.4040470363e-04, -1.3475927694e-04, -6.1118590266e-05, 4.7865785299e-05, 1.3962539714e-04, 1.6705052016e-04, 1.1263997889e-04, -9.4507226492e-07, -1.2007397636e-04, -1.8551126263e-04, -1.6194400574e-04, -5.6915510820e-05, 8.0945586551e-05, 1.8447998392e-04, 2.0086885128e-04, 1.1866061523e-04, -2.4923553316e-05, -1.6084804642e-04, -2.2166647440e-04, -1.7521428676e-04, -4.1646879141e-05, 1.1523288143e-04, 2.1869228568e-04, 2.1694290776e-04, 1.0931423494e-04, -5.2635248915e-05, -1.9004696087e-04, -2.3559327988e-04, -1.6689383887e-04, -1.7715632176e-05, 1.3877659281e-04, 2.2637729710e-04, 2.0353845719e-04, 8.3475726609e-05, -7.3277905644e-05, -1.8980006859e-04, -2.1124181953e-04, -1.3126869369e-04, 6.6033087182e-06, 1.3274173143e-04, 1.8729815230e-04, 1.4947160571e-04, 4.5388161479e-05, -6.8455286068e-05, -1.3626761923e-04, -1.3137639949e-04, -6.7023142071e-05, 1.5113729892e-05, 7.0811372141e-05, 7.8058752505e-05, 4.6515236684e-05, 7.0682792563e-06, -1.1012911872e-05, -3.4694152001e-07, 2.0163341356e-05, 2.0059069419e-05, -1.8084386782e-05, -8.0761654888e-05, -1.2600705526e-04, -1.0779407402e-04, -9.3560861529e-06, 1.3566824488e-04, 2.5104795541e-04, 2.5582623821e-04, 1.1440155091e-04, -1.3001988528e-04, -3.6261241294e-04, -4.4858812325e-04, -3.0728762231e-04, 3.0474529876e-05, 4.1805124673e-04, 6.5346883470e-04, 5.8166390466e-04, 1.8802489782e-04, -3.7021924427e-04, -8.2182590606e-04, -9.1040623161e-04, -5.3453727749e-04, 1.7527679580e-04, 8.9319312029e-04, 1.2440312051e-03, 9.9515873419e-04, 1.9795296981e-04, -8.0273862094e-04, -1.5126240642e-03, -1.5282183197e-03, -7.5838990617e-04, 4.9130838561e-04, 1.6315297390e-03, 2.0626262808e-03, 1.4840583179e-03, 8.2666764535e-05, -1.5110478239e-03, -2.5006528219e-03, -2.3163264124e-03, -9.3127194834e-04, 1.0689987979e-03, 2.7251094728e-03, 3.1579727691e-03, 2.0265732845e-03, -2.4515183326e-04, -2.6108639709e-03, -3.8761092588e-03, -3.2932198388e-03, -9.8429016435e-04, 2.0395990553e-03, 4.3100279902e-03, 4.6053409082e-03, 2.5938423019e-03, -9.1639764583e-04, -4.2835598157e-03, -5.7886748015e-03, -4.4996297324e-03, -8.1448172004e-04, 3.6196174585e-03, 6.6266366517e-03, 6.5540849741e-03, 3.1558280499e-03, -2.1553710110e-03, -6.8694741564e-03, -8.5452876253e-03, -6.0486806648e-03, -2.4661657369e-04, 6.2416083525e-03, 1.0197921991e-02, 9.3692555035e-03, 3.6963232105e-03, -4.4396158846e-03, -1.1169836961e-02, -1.2931967643e-02, -8.2929562949e-03, 1.1038371198e-03, 1.1028052687e-02, 1.6495362337e-02, 1.4179675332e-02, 4.2761711168e-03, -9.1636791613e-03, -1.9764481198e-02, -2.1697299754e-02, -1.2653958510e-02, 4.4991027221e-03, 2.2348768334e-02, 3.1844827369e-02, 2.6430350629e-02, 5.6502398665e-03, -2.3464108168e-02, -4.8130084644e-02, -5.4290601842e-02, -3.2236013527e-02, 1.8852078677e-02, 8.9387054992e-02, 1.6173986081e-01, 2.1580884803e-01, 2.3581793348e-01, 2.1580884803e-01, 1.6173986081e-01, 8.9387054992e-02, 1.8852078677e-02, -3.2236013527e-02, -5.4290601842e-02, -4.8130084644e-02, -2.3464108168e-02, 5.6502398665e-03, 2.6430350629e-02, 3.1844827369e-02, 2.2348768334e-02, 4.4991027221e-03, -1.2653958510e-02, -2.1697299754e-02, -1.9764481198e-02, -9.1636791613e-03, 4.2761711168e-03, 1.4179675332e-02, 1.6495362337e-02, 1.1028052687e-02, 1.1038371198e-03, -8.2929562949e-03, -1.2931967643e-02, -1.1169836961e-02, -4.4396158846e-03, 3.6963232105e-03, 9.3692555035e-03, 1.0197921991e-02, 6.2416083525e-03, -2.4661657369e-04, -6.0486806648e-03, -8.5452876253e-03, -6.8694741564e-03, -2.1553710110e-03, 3.1558280499e-03, 6.5540849741e-03, 6.6266366517e-03, 3.6196174585e-03, -8.1448172004e-04, -4.4996297324e-03, -5.7886748015e-03, -4.2835598157e-03, -9.1639764583e-04, 2.5938423019e-03, 4.6053409082e-03, 4.3100279902e-03, 2.0395990553e-03, -9.8429016435e-04, -3.2932198388e-03, -3.8761092588e-03, -2.6108639709e-03, -2.4515183326e-04, 2.0265732845e-03, 3.1579727691e-03, 2.7251094728e-03, 1.0689987979e-03, -9.3127194834e-04, -2.3163264124e-03, -2.5006528219e-03, -1.5110478239e-03, 8.2666764535e-05, 1.4840583179e-03, 2.0626262808e-03, 1.6315297390e-03, 4.9130838561e-04, -7.5838990617e-04, -1.5282183197e-03, -1.5126240642e-03, -8.0273862094e-04, 1.9795296981e-04, 9.9515873419e-04, 1.2440312051e-03, 8.9319312029e-04, 1.7527679580e-04, -5.3453727749e-04, -9.1040623161e-04, -8.2182590606e-04, -3.7021924427e-04, 1.8802489782e-04, 5.8166390466e-04, 6.5346883470e-04, 4.1805124673e-04, 3.0474529876e-05, -3.0728762231e-04, -4.4858812325e-04, -3.6261241294e-04, -1.3001988528e-04, 1.1440155091e-04, 2.5582623821e-04, 2.5104795541e-04, 1.3566824488e-04, -9.3560861529e-06, -1.0779407402e-04, -1.2600705526e-04, -8.0761654888e-05, -1.8084386782e-05, 2.0059069419e-05, 2.0163341356e-05, -3.4694152001e-07, -1.1012911872e-05, 7.0682792563e-06, 4.6515236684e-05, 7.8058752505e-05, 7.0811372141e-05, 1.5113729892e-05, -6.7023142071e-05, -1.3137639949e-04, -1.3626761923e-04, -6.8455286068e-05, 4.5388161479e-05, 1.4947160571e-04, 1.8729815230e-04, 1.3274173143e-04, 6.6033087182e-06, -1.3126869369e-04, -2.1124181953e-04, -1.8980006859e-04, -7.3277905644e-05, 8.3475726609e-05, 2.0353845719e-04, 2.2637729710e-04, 1.3877659281e-04, -1.7715632176e-05, -1.6689383887e-04, -2.3559327988e-04, -1.9004696087e-04, -5.2635248915e-05, 1.0931423494e-04, 2.1694290776e-04, 2.1869228568e-04, 1.1523288143e-04, -4.1646879141e-05, -1.7521428676e-04, -2.2166647440e-04, -1.6084804642e-04, -2.4923553316e-05, 1.1866061523e-04, 2.0086885128e-04, 1.8447998392e-04, 8.0945586551e-05, -5.6915510820e-05, -1.6194400574e-04, -1.8551126263e-04, -1.2007397636e-04, -9.4507226492e-07, 1.1263997889e-04, 1.6705052016e-04, 1.3962539714e-04, 4.7865785299e-05, -6.1118590266e-05, -1.3475927694e-04, -1.4040470363e-04, -7.9665915383e-05, 1.4488814602e-05, 9.5430079357e-05, 1.2593224830e-04, 9.5210154091e-05, 2.2181068302e-05, -5.5652404240e-05, -1.0135835099e-04, -9.6027969895e-05, -4.6316395594e-05, 2.0763496006e-05, 7.2299793370e-05, 8.5541827699e-05, 5.7766980126e-05, 5.7771518991e-06, -4.3826324013e-05, -6.8123248985e-05, -5.8336068734e-05, -2.2568032800e-05, 1.9740430396e-05, 4.8169951559e-05, 5.1060737096e-05, 3.0045213203e-05, -2.2338878649e-06, -2.9380106781e-05, -3.9439743718e-05, -3.0000720838e-05, -8.1140409905e-06, 1.4293178644e-05, 2.6738351232e-05, 2.4961636083e-05, 1.2050705154e-05, -4.1387912813e-06, -1.5491400992e-05, -1.7581351406e-05, -1.1197376941e-05, -1.0514981790e-06, 7.2465414510e-06, 1.0146129407e-05, 7.5442463806e-06, 2.1438124403e-06, -2.5447440301e-06, -4.2644692123e-06, -3.0000538420e-06, -5.1353646287e-07, 1.0841406175e-06, 7.4972093713e-07, -9.3978870859e-07, -2.3473223049e-06, -2.0037807805e-06, 3.1738427224e-07, 3.3629486845e-06, 5.1439418335e-06, 4.1980725604e-06, 5.9228238337e-07, -3.9610350079e-06, -6.9796815599e-06, -6.6012801642e-06, -2.6987159128e-06, 2.9285160434e-06, 7.4293507607e-06, 8.3923202907e-06, 5.1537467293e-06, -7.8966281872e-07, -6.5024435192e-06, -9.1006620686e-06, -7.2356034372e-06, -1.7972011101e-06, 4.5280747726e-06, 8.6142485847e-06, 8.4675724301e-06, 4.2112601063e-06, -2.0065151359e-06, -7.1151798428e-06, -8.6594236360e-06, -5.9922279112e-06, -5.3881767531e-07, 4.9698790122e-06, 7.8786427591e-06, 6.8987843184e-06, 2.6763887137e-06, -2.6095077007e-06, -6.3765802739e-06, -6.9081728035e-06, -4.1347681265e-06, 4.2620191709e-07, 4.4947423228e-06, 6.1707998031e-06, 4.8210299532e-06, 1.2969798607e-06, -2.5759054517e-06, -4.9409244578e-06, -4.7986461039e-06, -2.4172526965e-06, 8.9610366448e-07, 3.5024795758e-06, 4.2382281332e-06, 2.9263293069e-06, 3.7226332700e-07, -2.1080132207e-06, -3.3595530969e-06, -2.9195726205e-06, -1.1677550980e-06, 9.3883136803e-07, 2.3779765158e-06, 2.5518815370e-06, 1.5228713344e-06, -8.9827796277e-08, -1.4657369619e-06, -1.9932968185e-06, -1.5328607582e-06, -4.2455250825e-07, 7.3205001517e-07, 1.3933943573e-06, 1.3203530215e-06, 6.4982070103e-07, -2.2139126792e-07, -8.5982770186e-07, -1.0046538929e-06, -6.6501887371e-07, -7.5049274185e-08, 4.5118513646e-07, 6.8039372085e-07, 5.5709826662e-07, 2.0038363536e-07, -1.8206820874e-07, -4.0779339881e-07, -4.0167092125e-07, -2.1204631186e-07, 3.5472627343e-08, 2.1298160380e-07, 2.5217429069e-07, 1.6524196555e-07, 2.2252109387e-08, -9.5366500986e-08, -1.3732833013e-07, -1.0245084923e-07, -2.8001186874e-08, 3.8182533001e-08, 6.4783080557e-08, 4.9342354200e-08, 1.2496685302e-08, -1.8902002751e-08, -2.8215730030e-08, -1.6030649970e-08, 4.1991839397e-09, 1.7052716275e-08, 1.4975602262e-08, 1.4843245072e-09, -1.2943565403e-08, -1.8551918922e-08, -1.2331757880e-08, 9.9942072544e-10, 1.2893235690e-08, 1.6656637985e-08}
  COEFFICIENT_WIDTH 32
  QUANTIZATION Maximize_Dynamic_Range
  BESTPRECISION true
  FILTER_TYPE Decimation
  DECIMATION_RATE 4
  NUMBER_CHANNELS 16
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 0.0015
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 33
  M_DATA_HAS_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA subset_0/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_subset_converter
cell xilinx.com:ip:axis_subset_converter:1.1 subset_1 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 5
  M_TDATA_NUM_BYTES 4
  TDATA_REMAP {tdata[31:0]}
} {
  S_AXIS fir_1/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create floating_point
cell xilinx.com:ip:floating_point:7.1 fp_0 {
  OPERATION_TYPE Fixed_to_float
  A_PRECISION_TYPE.VALUE_SRC USER
  C_A_EXPONENT_WIDTH.VALUE_SRC USER
  C_A_FRACTION_WIDTH.VALUE_SRC USER
  A_PRECISION_TYPE Custom
  C_A_EXPONENT_WIDTH 2
  C_A_FRACTION_WIDTH 30
  RESULT_PRECISION_TYPE Single
  HAS_ARESETN true
} {
  S_AXIS_A subset_1/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter:1.1 conv_1 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 64
} {
  S_AXIS fp_0/M_AXIS_RESULT
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_broadcaster
cell xilinx.com:ip:axis_broadcaster:1.1 bcast_9 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 64
  M_TDATA_NUM_BYTES 8
  NUM_MI 8
  M00_TDATA_REMAP {tdata[63:0]}
  M01_TDATA_REMAP {tdata[127:64]}
  M02_TDATA_REMAP {tdata[191:128]}
  M03_TDATA_REMAP {tdata[255:192]}
  M04_TDATA_REMAP {tdata[319:256]}
  M05_TDATA_REMAP {tdata[383:320]}
  M06_TDATA_REMAP {tdata[447:384]}
  M07_TDATA_REMAP {tdata[511:448]}
} {
  S_AXIS conv_1/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

for {set i 0} {$i <= 7} {incr i} {

  # Create fifo_generator
  cell xilinx.com:ip:fifo_generator:13.0 fifo_generator_$i {
    PERFORMANCE_OPTIONS First_Word_Fall_Through
    INPUT_DATA_WIDTH 64
    INPUT_DEPTH 512
    OUTPUT_DATA_WIDTH 32
    OUTPUT_DEPTH 1024
    READ_DATA_COUNT true
    READ_DATA_COUNT_WIDTH 11
  } {
    clk /ps_0/FCLK_CLK0
    srst slice_0/Dout
  }

  # Create axis_fifo
  cell pavel-demin:user:axis_fifo:1.0 fifo_[expr $i + 1] {
    S_AXIS_TDATA_WIDTH 64
    M_AXIS_TDATA_WIDTH 32
  } {
    S_AXIS bcast_9/M0${i}_AXIS
    FIFO_READ fifo_generator_$i/FIFO_READ
    FIFO_WRITE fifo_generator_$i/FIFO_WRITE
    aclk /ps_0/FCLK_CLK0
  }

  # Create axi_axis_reader
  cell pavel-demin:user:axi_axis_reader:1.0 reader_$i {
    AXI_DATA_WIDTH 32
  } {
    S_AXIS fifo_[expr $i + 1]/M_AXIS
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

}
